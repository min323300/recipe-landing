<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë ˆì‹œí”¼ ì˜ìƒ & ì¬ë£Œ êµ¬ë§¤ | BSì»´í¼ë‹ˆ</title>
  <meta name="description" content="ì˜ìƒìœ¼ë¡œ ìš”ë¦¬ ë°°ìš°ê³ , ë¸”ë¡œê·¸ ê¸€ë¡œ í™•ì¸í•˜ê³ , í•„ìš”í•œ ì¬ë£ŒëŠ” ë°”ë¡œ êµ¬ë§¤í•˜ì„¸ìš”">
  
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ‘¨â€ğŸ³</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-color: #FAFAFA;
      color: #1A1A1A;
      line-height: 1.6;
    }
    
    /* ë¡œë”© */
    .loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 80px 20px;
      gap: 16px;
    }
    
    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 4px solid #FFE8DD;
      border-top-color: #FF6B35;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(15px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    /* ì—ëŸ¬ ë©”ì‹œì§€ */
    .error-message {
      max-width: 600px;
      margin: 40px auto;
      padding: 30px;
      background: #FFF5F5;
      border: 1px solid #FFE0E0;
      border-radius: 16px;
      text-align: center;
    }
    
    .error-message h3 {
      color: #E53E3E;
      margin-bottom: 12px;
    }
    
    .error-message code {
      display: block;
      background: #FFF;
      padding: 12px;
      border-radius: 8px;
      margin: 12px 0;
      font-size: 12px;
      word-break: break-all;
    }
    
    /* ìƒë‹¨ ë°°ë„ˆ */
    .top-banner {
      background: linear-gradient(90deg, #FF6B35 0%, #FF8C5A 100%);
      color: white;
      padding: 14px 20px;
      text-align: center;
      font-size: 14px;
      font-weight: 600;
    }
    
    /* íˆì–´ë¡œ */
    .hero {
      position: relative;
      background: linear-gradient(180deg, #FFF9F5 0%, #FFF 100%);
      padding: 50px 20px 70px;
      overflow: hidden;
    }
    
    .hero-bg {
      position: absolute;
      top: 0; right: 0;
      width: 50%; height: 100%;
      background: radial-gradient(circle at 70% 30%, rgba(255,107,53,0.08) 0%, transparent 60%);
    }
    
    .partner-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background-color: white;
      padding: 8px 14px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 600;
      color: #B8860B;
      border: 1px solid #F0E6D3;
      margin-bottom: 20px;
    }
    
    .hero-content {
      display: flex;
      align-items: center;
      justify-content: center;
      max-width: 900px;
      margin: 0 auto;
      gap: 60px;
      flex-wrap: wrap;
      position: relative;
      z-index: 1;
    }
    
    .hero-image {
      position: relative;
      width: 200px;
      height: 200px;
    }
    
    .chef-circle {
      width: 160px;
      height: 160px;
      background-color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 20px 50px rgba(255,107,53,0.2);
      margin: 20px auto;
      font-size: 80px;
    }
    
    .bubble {
      position: absolute;
      font-size: 26px;
      animation: float 2.5s ease-in-out infinite;
    }
    
    .bubble-1 { top: 0; right: 10px; }
    .bubble-2 { bottom: 10px; right: 0; animation-delay: 0.5s; }
    .bubble-3 { bottom: 20px; left: 0; animation-delay: 1s; }
    
    .hero-text { text-align: left; max-width: 400px; }
    
    .hero-title {
      font-size: clamp(28px, 5vw, 40px);
      font-weight: 800;
      line-height: 1.3;
      margin-bottom: 16px;
    }
    
    .highlight { color: #FF6B35; }
    
    .hero-subtitle {
      font-size: 16px;
      color: #666;
      line-height: 1.7;
    }
    
    /* ê²€ìƒ‰ */
    .search-section {
      background-color: white;
      padding: 40px 20px 30px;
      border-bottom: 1px solid #F0F0F0;
    }
    
    .search-container { max-width: 700px; margin: 0 auto; }
    
    .search-title {
      font-size: 18px;
      font-weight: 700;
      text-align: center;
      margin-bottom: 20px;
    }
    
    .search-box {
      display: flex;
      align-items: center;
      background-color: #F5F5F5;
      border-radius: 16px;
      padding: 4px 8px 4px 20px;
      margin-bottom: 20px;
    }
    
    .search-icon { font-size: 18px; margin-right: 12px; }
    
    .search-input {
      flex: 1;
      padding: 16px 0;
      font-size: 16px;
      border: none;
      outline: none;
      background: transparent;
      font-family: 'Noto Sans KR', sans-serif;
    }
    
    .clear-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: none;
      background-color: #E0E0E0;
      cursor: pointer;
      font-size: 14px;
      color: #666;
      display: none;
    }
    
    .clear-btn.show { display: block; }
    
    /* ì¹´í…Œê³ ë¦¬ */
    .category-tabs {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: center;
    }
    
    .category-tab {
      padding: 10px 18px;
      border-radius: 25px;
      border: 1px solid #E0E0E0;
      background-color: white;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      font-family: 'Noto Sans KR', sans-serif;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .category-tab:hover { border-color: #FF6B35; }
    
    .category-tab.active {
      background-color: #FF6B35;
      border-color: #FF6B35;
      color: white;
    }
    
    /* ë ˆì‹œí”¼ ëª©ë¡ */
    .recipe-section {
      padding: 40px 20px;
      max-width: 1100px;
      margin: 0 auto;
    }
    
    .result-info {
      font-size: 14px;
      color: #888;
      margin-bottom: 24px;
    }
    
    .recipe-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 24px;
    }
    
    .recipe-card {
      background-color: white;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 2px 16px rgba(0,0,0,0.06);
      cursor: pointer;
      transition: all 0.3s ease;
      animation: fadeInUp 0.5s ease-out forwards;
      opacity: 0;
    }
    
    .recipe-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 30px rgba(0,0,0,0.12);
    }
    
    .card-thumbnail {
      position: relative;
      height: 160px;
      background: linear-gradient(135deg, #FFE8DD 0%, #FFD4BC 100%);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .card-emoji { font-size: 70px; }
    
    .card-duration {
      position: absolute;
      bottom: 12px;
      right: 12px;
      background-color: rgba(0,0,0,0.75);
      color: white;
      padding: 4px 10px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 500;
    }
    
    .play-btn {
      position: absolute;
      width: 50px;
      height: 50px;
      background-color: rgba(255,255,255,0.95);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      color: #FF6B35;
      box-shadow: 0 4px 15px rgba(0,0,0,0.15);
    }
    
    .card-content { padding: 20px; }
    
    .card-category {
      display: inline-block;
      font-size: 11px;
      font-weight: 600;
      color: #FF6B35;
      background-color: #FFF0EB;
      padding: 4px 10px;
      border-radius: 10px;
      margin-bottom: 10px;
    }
    
    .card-title {
      font-size: 17px;
      font-weight: 700;
      margin-bottom: 6px;
    }
    
    .card-desc {
      font-size: 13px;
      color: #888;
      margin-bottom: 14px;
    }
    
    .card-meta {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    
    .meta-item {
      font-size: 12px;
      color: #666;
      background-color: #F5F5F5;
      padding: 5px 10px;
      border-radius: 8px;
    }
    
    /* ê²°ê³¼ ì—†ìŒ */
    .no-result {
      text-align: center;
      padding: 60px 20px;
      display: none;
    }
    
    .no-result.show { display: block; }
    
    .no-result-emoji {
      font-size: 60px;
      margin-bottom: 16px;
    }
    
    /* ëª¨ë‹¬ */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background-color: rgba(0,0,0,0.6);
      z-index: 1000;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    
    .modal-overlay.show { display: flex; }
    
    .modal {
      position: relative;
      background-color: white;
      border-radius: 24px;
      width: 100%;
      max-width: 800px;
      max-height: 90vh;
      overflow-y: auto;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    
    .close-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: none;
      background-color: #F5F5F5;
      font-size: 18px;
      cursor: pointer;
    }
    
    .close-btn:hover { background-color: #E0E0E0; }
    
    .detail-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .detail-emoji { font-size: 32px; }
    
    .detail-desc {
      font-size: 15px;
      color: #888;
      margin-bottom: 20px;
    }
    
    .video-wrapper {
      position: relative;
      padding-bottom: 56.25%;
      background-color: #000;
      border-radius: 16px;
      overflow: hidden;
      margin-bottom: 28px;
    }
    
    .video-wrapper iframe {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
    }
    
    .section-label {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 14px;
      color: #333;
    }
    
    .blog-link {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 18px 20px;
      background-color: #F8F9FA;
      border-radius: 14px;
      text-decoration: none;
      color: inherit;
      border: 1px solid #E8E8E8;
      margin-bottom: 28px;
      transition: background-color 0.2s;
    }
    
    .blog-link:hover { background-color: #F0F0F0; }
    
    .blog-icon { font-size: 28px; }
    .blog-info { flex: 1; }
    .blog-title { font-weight: 600; font-size: 15px; display: block; }
    .blog-hint { font-size: 12px; color: #999; }
    .blog-arrow { font-size: 20px; color: #CCC; }
    
    .ingredients-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .ingredient-item {
      display: flex;
      align-items: center;
      gap: 14px;
      padding: 14px 16px;
      background-color: #FFFBF8;
      border-radius: 12px;
      text-decoration: none;
      color: inherit;
      border: 1px solid #FFE8DD;
      transition: all 0.2s;
    }
    
    .ingredient-item:hover {
      background-color: #FFF0E6;
      border-color: #FF6B35;
    }
    
    .ingredient-emoji {
      font-size: 24px;
      width: 44px;
      height: 44px;
      background-color: white;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .ingredient-info { flex: 1; }
    .ingredient-name { font-size: 14px; font-weight: 600; display: block; }
    .ingredient-price { font-size: 15px; font-weight: 700; color: #FF6B35; }
    
    .shop-badge {
      font-size: 11px;
      font-weight: 600;
      color: #666;
      background-color: #F0F0F0;
      padding: 5px 10px;
      border-radius: 8px;
    }
    
    .affiliate-note {
      margin-top: 16px;
      font-size: 11px;
      color: #BBB;
      text-align: center;
    }
    
    .no-products {
      padding: 20px;
      text-align: center;
      color: #999;
      background: #F9F9F9;
      border-radius: 12px;
    }
    
    /* í‘¸í„° */
    .footer {
      background-color: #1A1A1A;
      color: white;
      padding: 40px 20px;
      text-align: center;
    }
    
    .footer-logo {
      font-size: 20px;
      font-weight: 700;
      color: #FF6B35;
      margin-bottom: 12px;
    }
    
    .footer-text {
      font-size: 12px;
      color: #888;
      line-height: 1.8;
      margin-bottom: 12px;
    }
    
    .footer-copyright {
      font-size: 11px;
      color: #555;
    }
    
    @media (max-width: 768px) {
      .hero-content { gap: 30px; }
      .hero-text { text-align: center; }
      .modal { padding: 20px; border-radius: 16px; }
    }
  </style>
</head>
<body>
  <!-- ìƒë‹¨ ë°°ë„ˆ -->
  <div class="top-banner">
    ğŸ³ ì˜ìƒìœ¼ë¡œ ë°°ìš°ê³ , ê¸€ë¡œ í™•ì¸í•˜ê³ , ì¬ë£ŒëŠ” ë°”ë¡œ êµ¬ë§¤í•˜ì„¸ìš”!
  </div>

  <!-- íˆì–´ë¡œ -->
  <section class="hero">
    <div class="hero-bg"></div>
    <div class="partner-badge"><span>ğŸ†</span> ê³µì‹ ì¿ íŒ¡íŒŒíŠ¸ë„ˆìŠ¤</div>
    <div class="hero-content">
      <div class="hero-image">
        <div class="chef-circle">ğŸ‘¨â€ğŸ³</div>
        <div class="bubble bubble-1">ğŸ“º</div>
        <div class="bubble bubble-2">ğŸ“</div>
        <div class="bubble bubble-3">ğŸ›’</div>
      </div>
      <div class="hero-text">
        <h1 class="hero-title">
          ë ˆì‹œí”¼ <span class="highlight">ì˜ìƒ</span>ë¶€í„°<br>
          <span class="highlight">ì¬ë£Œ êµ¬ë§¤</span>ê¹Œì§€ í•œë²ˆì—
        </h1>
        <p class="hero-subtitle">
          ì˜ìƒìœ¼ë¡œ ìš”ë¦¬ ë°°ìš°ê³  â€¢ ë¸”ë¡œê·¸ ê¸€ë¡œ í™•ì¸í•˜ê³ <br>
          í•„ìš”í•œ ì¬ë£ŒëŠ” ë°”ë¡œ êµ¬ë§¤í•˜ì„¸ìš”
        </p>
      </div>
    </div>
  </section>

  <!-- ê²€ìƒ‰ -->
  <section class="search-section">
    <div class="search-container">
      <h2 class="search-title">ğŸ” ì–´ë–¤ ìš”ë¦¬ë¥¼ ì°¾ìœ¼ì„¸ìš”?</h2>
      <div class="search-box">
        <span class="search-icon">ğŸ”</span>
        <input type="text" id="searchInput" class="search-input" placeholder="ë ˆì‹œí”¼ ê²€ìƒ‰ (ì˜ˆ: ê¹€ì¹˜ì°Œê°œ, ë¶ˆê³ ê¸°, ë–¡ë³¶ì´...)">
        <button id="clearBtn" class="clear-btn">âœ•</button>
      </div>
      <div class="category-tabs" id="categoryTabs"></div>
    </div>
  </section>

  <!-- ë ˆì‹œí”¼ ëª©ë¡ -->
  <section class="recipe-section">
    <div id="loadingArea" class="loading">
      <div class="loading-spinner"></div>
      <p>ë ˆì‹œí”¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
    </div>
    
    <div id="errorArea"></div>
    
    <div id="contentArea" style="display: none;">
      <div class="result-info" id="resultInfo">ì´ <strong>0</strong>ê°œì˜ ë ˆì‹œí”¼</div>
      <div class="recipe-grid" id="recipeGrid"></div>
      <div class="no-result" id="noResult">
        <div class="no-result-emoji">ğŸ¤”</div>
        <p>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</p>
      </div>
    </div>
  </section>

  <!-- ëª¨ë‹¬ -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal" id="modal">
      <button class="close-btn" id="closeBtn">âœ•</button>
      <div id="modalContent"></div>
    </div>
  </div>

  <!-- í‘¸í„° -->
  <footer class="footer">
    <p class="footer-logo">BSì»´í¼ë‹ˆ</p>
    <p class="footer-text">
      ì´ í¬ìŠ¤íŒ…ì€ ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ í™œë™ì˜ ì¼í™˜ìœ¼ë¡œ,<br>
      ì´ì— ë”°ë¥¸ ì¼ì •ì•¡ì˜ ìˆ˜ìˆ˜ë£Œë¥¼ ì œê³µë°›ìŠµë‹ˆë‹¤.
    </p>
    <p class="footer-copyright">Â© 2025 BS Company</p>
  </footer>

  <script>
    // ============================================
    // ğŸ”§ ì„¤ì • - ì—¬ê¸°ë§Œ ìˆ˜ì •í•˜ì„¸ìš”!
    // ============================================
    
    // êµ¬ê¸€ ì‹œíŠ¸ ID (ì‹œíŠ¸ URLì—ì„œ ë³µì‚¬)
    // ì˜ˆ: https://docs.google.com/spreadsheets/d/ì—¬ê¸°ê°€ID/edit
    const SHEET_ID = '1iq0rpcyhQrayAXldr-D4NYqZQ_J8Qvf_GF3vgvU6bw';
    
    // ì‹œíŠ¸ ì´ë¦„ë“¤
    const CATEGORY_SHEET = 'ì¹´í…Œê³ ë¦¬';
    const RECIPE_SHEET = 'ë ˆì‹œí”¼';
    const PRODUCT_SHEET = 'ìƒí’ˆ';
    
    // ============================================
    // ë°ì´í„° ì €ì¥
    // ============================================
    let categories = [];
    let recipes = [];
    let products = [];
    let selectedCategory = 'ì „ì²´';
    let searchQuery = '';
    
    // DOM
    const loadingArea = document.getElementById('loadingArea');
    const errorArea = document.getElementById('errorArea');
    const contentArea = document.getElementById('contentArea');
    const searchInput = document.getElementById('searchInput');
    const clearBtn = document.getElementById('clearBtn');
    const categoryTabs = document.getElementById('categoryTabs');
    const recipeGrid = document.getElementById('recipeGrid');
    const resultInfo = document.getElementById('resultInfo');
    const noResult = document.getElementById('noResult');
    const modalOverlay = document.getElementById('modalOverlay');
    const modalContent = document.getElementById('modalContent');
    const closeBtn = document.getElementById('closeBtn');
    
    // ============================================
    // êµ¬ê¸€ ì‹œíŠ¸ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
    // ============================================
    async function fetchSheetData(sheetName) {
      const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(sheetName)}`;
      
      const response = await fetch(url);
      const text = await response.text();
      
      // Googleì˜ JSON ì‘ë‹µ íŒŒì‹±
      const json = JSON.parse(text.substring(47).slice(0, -2));
      
      if (!json.table || !json.table.rows) {
        return [];
      }
      
      const headers = json.table.cols.map(col => col.label || '');
      const rows = json.table.rows.map(row => {
        const obj = {};
        row.c.forEach((cell, i) => {
          obj[headers[i]] = cell ? (cell.v || '') : '';
        });
        return obj;
      });
      
      return rows;
    }
    
    async function loadAllData() {
      try {
        loadingArea.style.display = 'flex';
        contentArea.style.display = 'none';
        errorArea.innerHTML = '';
        
        // ë³‘ë ¬ë¡œ ëª¨ë“  ì‹œíŠ¸ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        const [catData, recipeData, productData] = await Promise.all([
          fetchSheetData(CATEGORY_SHEET),
          fetchSheetData(RECIPE_SHEET),
          fetchSheetData(PRODUCT_SHEET)
        ]);
        
        categories = catData;
        recipes = recipeData;
        products = productData;
        
        loadingArea.style.display = 'none';
        contentArea.style.display = 'block';
        
        renderCategories();
        renderRecipes();
        
      } catch (error) {
        console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
        loadingArea.style.display = 'none';
        errorArea.innerHTML = `
          <div class="error-message">
            <h3>âš ï¸ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h3>
            <p>êµ¬ê¸€ ì‹œíŠ¸ ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”:</p>
            <ol style="text-align: left; margin: 16px 0;">
              <li>ì‹œíŠ¸ IDê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸</li>
              <li>ì‹œíŠ¸ê°€ "ì›¹ì— ê²Œì‹œ" ë˜ì—ˆëŠ”ì§€ í™•ì¸</li>
              <li>ì‹œíŠ¸ ì´ë¦„ì´ ì •í™•í•œì§€ í™•ì¸ (ì¹´í…Œê³ ë¦¬, ë ˆì‹œí”¼, ìƒí’ˆ)</li>
            </ol>
            <code>í˜„ì¬ ì„¤ì •ëœ ì‹œíŠ¸ ID: ${SHEET_ID}</code>
            <p style="margin-top: 16px;">
              <button onclick="loadAllData()" style="padding: 10px 20px; background: #FF6B35; color: white; border: none; border-radius: 8px; cursor: pointer;">
                ë‹¤ì‹œ ì‹œë„
              </button>
            </p>
          </div>
        `;
      }
    }
    
    // ============================================
    // ë Œë”ë§
    // ============================================
    function renderCategories() {
      const categoryNames = ['ì „ì²´', ...categories.map(c => c['ì¹´í…Œê³ ë¦¬ëª…'] || c['ì´ë¦„'] || '')].filter(Boolean);
      
      categoryTabs.innerHTML = categoryNames.map(cat => {
        const catInfo = categories.find(c => (c['ì¹´í…Œê³ ë¦¬ëª…'] || c['ì´ë¦„']) === cat);
        const icon = catInfo ? (catInfo['ì•„ì´ì½˜'] || '') : '';
        return `
          <button class="category-tab ${selectedCategory === cat ? 'active' : ''}" data-category="${cat}">
            ${icon} ${cat}
          </button>
        `;
      }).join('');
    }
    
    function getFilteredRecipes() {
      return recipes.filter(recipe => {
        const title = recipe['ì œëª©'] || recipe['ë ˆì‹œí”¼ëª…'] || '';
        const desc = recipe['ì„¤ëª…'] || '';
        const category = recipe['ì¹´í…Œê³ ë¦¬'] || '';
        
        const matchesSearch = title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                              desc.toLowerCase().includes(searchQuery.toLowerCase());
        const matchesCategory = selectedCategory === 'ì „ì²´' || category === selectedCategory;
        
        return matchesSearch && matchesCategory;
      });
    }
    
    function renderRecipes() {
      const filtered = getFilteredRecipes();
      
      resultInfo.innerHTML = `ì´ <strong>${filtered.length}</strong>ê°œì˜ ë ˆì‹œí”¼`;
      
      if (filtered.length === 0) {
        recipeGrid.innerHTML = '';
        noResult.classList.add('show');
        return;
      }
      
      noResult.classList.remove('show');
      
      recipeGrid.innerHTML = filtered.map((recipe, index) => {
        const id = recipe['ID'] || recipe['id'] || index;
        const title = recipe['ì œëª©'] || recipe['ë ˆì‹œí”¼ëª…'] || 'ì œëª© ì—†ìŒ';
        const desc = recipe['ì„¤ëª…'] || '';
        const category = recipe['ì¹´í…Œê³ ë¦¬'] || '';
        const emoji = recipe['ì´ëª¨ì§€'] || recipe['ì¸ë„¤ì¼'] || 'ğŸ½ï¸';
        const duration = recipe['ì˜ìƒê¸¸ì´'] || recipe['ì‹œê°„'] || '';
        const recipeProducts = products.filter(p => (p['ë ˆì‹œí”¼ID'] || p['ë ˆì‹œí”¼_ID']) == id);
        
        return `
          <div class="recipe-card" data-id="${id}" style="animation-delay: ${index * 0.08}s">
            <div class="card-thumbnail">
              <span class="card-emoji">${emoji}</span>
              ${duration ? `<div class="card-duration">${duration}</div>` : ''}
              <div class="play-btn">â–¶</div>
            </div>
            <div class="card-content">
              <span class="card-category">${category}</span>
              <h3 class="card-title">${title}</h3>
              <p class="card-desc">${desc}</p>
              <div class="card-meta">
                <span class="meta-item">ğŸ“º ì˜ìƒ</span>
                <span class="meta-item">ğŸ“ ê¸€</span>
                <span class="meta-item">ğŸ›’ ì¬ë£Œ ${recipeProducts.length}ê°œ</span>
              </div>
            </div>
          </div>
        `;
      }).join('');
    }
    
    function openModal(recipeId) {
      const recipe = recipes.find(r => (r['ID'] || r['id']) == recipeId);
      if (!recipe) return;
      
      const title = recipe['ì œëª©'] || recipe['ë ˆì‹œí”¼ëª…'] || '';
      const desc = recipe['ì„¤ëª…'] || '';
      const emoji = recipe['ì´ëª¨ì§€'] || recipe['ì¸ë„¤ì¼'] || 'ğŸ½ï¸';
      const youtubeUrl = recipe['ìœ íŠœë¸Œë§í¬'] || recipe['ìœ íŠœë¸Œ'] || '';
      const blogUrl = recipe['ë¸”ë¡œê·¸ë§í¬'] || recipe['í‹°ìŠ¤í† ë¦¬'] || recipe['ë¸”ë¡œê·¸'] || '';
      const blogTitle = recipe['ë¸”ë¡œê·¸ì œëª©'] || `${title} ë ˆì‹œí”¼ (ê¸€ë¡œ ë³´ê¸°)`;
      
      // ìœ íŠœë¸Œ ID ì¶”ì¶œ
      let youtubeId = '';
      if (youtubeUrl) {
        const match = youtubeUrl.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\s]+)/);
        youtubeId = match ? match[1] : youtubeUrl;
      }
      
      // í•´ë‹¹ ë ˆì‹œí”¼ì˜ ìƒí’ˆë“¤
      const recipeProducts = products.filter(p => (p['ë ˆì‹œí”¼ID'] || p['ë ˆì‹œí”¼_ID']) == recipeId);
      
      modalContent.innerHTML = `
        <h2 class="detail-title">
          <span class="detail-emoji">${emoji}</span>
          ${title}
        </h2>
        <p class="detail-desc">${desc}</p>
        
        ${youtubeId ? `
          <div class="video-wrapper">
            <iframe 
              src="https://www.youtube.com/embed/${youtubeId}" 
              title="${title}"
              frameborder="0" 
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
              allowfullscreen>
            </iframe>
          </div>
        ` : '<p style="padding:40px; text-align:center; background:#f5f5f5; border-radius:12px;">ì˜ìƒì´ ë“±ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤</p>'}
        
        <h3 class="section-label">ğŸ“ ê¸€ë¡œ ë³´ëŠ” ë ˆì‹œí”¼</h3>
        ${blogUrl ? `
          <a href="${blogUrl}" target="_blank" rel="noopener noreferrer" class="blog-link">
            <div class="blog-icon">ğŸ“„</div>
            <div class="blog-info">
              <span class="blog-title">${blogTitle}</span>
              <span class="blog-hint">í´ë¦­í•˜ë©´ ë¸”ë¡œê·¸/í‹°ìŠ¤í† ë¦¬ë¡œ ì´ë™</span>
            </div>
            <span class="blog-arrow">â†’</span>
          </a>
        ` : '<p class="no-products">ë¸”ë¡œê·¸ ê¸€ì´ ë“±ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤</p>'}
        
        <h3 class="section-label">ğŸ›’ í•„ìš”í•œ ì¬ë£Œ ë°”ë¡œ êµ¬ë§¤</h3>
        ${recipeProducts.length > 0 ? `
          <div class="ingredients-list">
            ${recipeProducts.map(p => `
              <a href="${p['ì‡¼í•‘ë§í¬'] || p['ë§í¬'] || '#'}" target="_blank" rel="noopener noreferrer" class="ingredient-item">
                <span class="ingredient-emoji">${p['ì´ëª¨ì§€'] || 'ğŸ›’'}</span>
                <div class="ingredient-info">
                  <span class="ingredient-name">${p['ìƒí’ˆëª…'] || ''}</span>
                  <span class="ingredient-price">${p['ê°€ê²©'] || ''}</span>
                </div>
                <span class="shop-badge">${p['ì‡¼í•‘ëª°'] || 'ì¿ íŒ¡'}</span>
              </a>
            `).join('')}
          </div>
          <p class="affiliate-note">* ì´ ë§í¬ë¥¼ í†µí•´ êµ¬ë§¤ì‹œ ì†Œì •ì˜ ìˆ˜ìˆ˜ë£Œë¥¼ ë°›ìŠµë‹ˆë‹¤</p>
        ` : '<p class="no-products">ë“±ë¡ëœ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤</p>'}
      `;
      
      modalOverlay.classList.add('show');
      document.body.style.overflow = 'hidden';
    }
    
    function closeModal() {
      modalOverlay.classList.remove('show');
      document.body.style.overflow = '';
      modalContent.innerHTML = '';
    }
    
    // ============================================
    // ì´ë²¤íŠ¸
    // ============================================
    searchInput.addEventListener('input', (e) => {
      searchQuery = e.target.value;
      clearBtn.classList.toggle('show', searchQuery.length > 0);
      renderRecipes();
    });
    
    clearBtn.addEventListener('click', () => {
      searchQuery = '';
      searchInput.value = '';
      clearBtn.classList.remove('show');
      renderRecipes();
    });
    
    categoryTabs.addEventListener('click', (e) => {
      if (e.target.classList.contains('category-tab')) {
        selectedCategory = e.target.dataset.category;
        renderCategories();
        renderRecipes();
      }
    });
    
    recipeGrid.addEventListener('click', (e) => {
      const card = e.target.closest('.recipe-card');
      if (card) openModal(card.dataset.id);
    });
    
    closeBtn.addEventListener('click', closeModal);
    modalOverlay.addEventListener('click', (e) => {
      if (e.target === modalOverlay) closeModal();
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });
    
    // ============================================
    // ì‹œì‘
    // ============================================
    loadAllData();
  </script>
</body>
</html>
